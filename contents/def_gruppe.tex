%!TEX root = ../trajectory-grouping.tex

Wir bezeichnen mit $\mathcal{X}$ die Menge der Entitäten, zu denen uns der Ort innerhalb eines gewissen Zeitraums bekannt ist.
Wie in \cref{cha:einleitung} angedeutet wird unsere Definition einer Gruppe von den folgenden drei Parametern abhängen, die Charakteristika der zu betrachtenden Gruppen bestimmen:
\begin{itemize}
	\item Räumlicher Parameter $\varepsilon > 0$
	\item zeitlicher Parameter $\delta > 0$
	\item Mindestgröße $m \in \mathbb{N}\setminus \set*{0}$
\end{itemize}
Wir beginnen mit einigen Definitionen zum räumlichen Zusammenhang zu einem festen Zeitpunkt $t$.\todo{Scheibe offen oder geschlossen?}
\begin{definition}
	Die $\varepsilon$-Scheibe $B_\varepsilon^t(x)$ einer Entität $x$ zum Zeitpunkt $t$ ist eine Scheibe mit Radius $\varepsilon$ um $x$ zu Zeitpunkt $t$, also $B_\varepsilon^t(x) = \set*{y \in \mathbb{R}^d \given \norm*{x^t-y} \le \varepsilon}$.\marginnote{wir betrachten meist $d=2$}
	
	Zwei Entitäten $x$ und $y$ sind zum Zeitpunkt $t$ \Index{direkt zusammenhängend}, falls sich die $\varepsilon$-Scheiben überlappen, das heißt der Schnitt der beiden offenen Scheiben nicht leer ist.
	
	Die Entitäten $x$ und $y$ heißen \bet{$\varepsilon$-zusammenhängend}\index{epsilon-zusammenhängend@$\varepsilon$-zusammenhängend} zum Zeitpunkt $t$, falls eine Folge von Entitäten $x=x_0, \ldots, x_k = y$ existiert, sodass $x_i$ und $x_{i+1}$ direkt zusammenhängend sind.
\end{definition}

Eine Teilmenge $\mathcal{S} \subseteq \mathcal{X}$ heißt dementsprechend \bet{$\varepsilon$-zusammenhängend}, falls alle Entitäten in $\mathcal{S}$ paarweise $\varepsilon$-zusammenhängend sind.
Dies ist äquivalent dazu, dass das Innere der Vereinigung aller $\varepsilon$-Scheiben der Entitäten von $\mathcal{S}$ zusammenhängend ist.
Wir nennen $\mathcal{S}$ eine \Index{Komponente} zum Zeitpunkt $t$, falls $\mathcal{S}$ eine maximale $\varepsilon$-zusammenhängende Teilmenge ist.
Die Menge der Komponenten zum Zeitpunkt $t$ bezeichnen wir mit $\mathcal{C}(t)$; sie bildet eine Partition von $\mathcal{X}$ zum Zeitpunkt $t$.

\Cref{fig:components} zeigt die Auswirkung verschiedener $\varepsilon$-Werte auf die Partition der Entitäten in verschiedene $\varepsilon$-Komponenten.

\begin{figure}[bthp]
	\Centering
	\subfloat[Mit $\varepsilon=\SI{0.4}{\centi\metre}$ liegen alle Punkte in einer Komponente]{
		\begin{tikzpicture}[scale=1.2]
			% \draw[help lines] (-1,-1) grid (2,2);
			\coordinate (1) at (0,-0.02);
			\coordinate (2) at (.05,.4);
			\coordinate (3) at (.5,.2);
			\coordinate (4) at (.85,-.08);
			\coordinate (5) at (1.45,-.04);
			\coordinate (6) at (-0.7,.3);
			\coordinate (7) at (2.1,.3);
			\coordinate (8) at (2.05,1);
			\coordinate (9) at (0.2,1.1);
			\coordinate (10) at (.9,-.65);
			\coordinate (11) at (2.2,.6);
			\coordinate (12) at (-.3,1);
			\coordinate (13) at (-.8,.9);
			\coordinate (14) at (-1.1,.5);
			\foreach \x in {1,2,...,14}{
				\draw[DodgerBlue3,fill=DodgerBlue3,fill opacity=.35,very thick] (\x) circle[radius=.4];
				\draw[fill,very thick] (\x) circle[radius=.02];
			}
		\end{tikzpicture}
	}
	\hspace{2cm}
	\subfloat[Mit $\varepsilon=\SI{0.3}{\centi\metre}$ erhält man drei Komponenten]{
		\begin{tikzpicture}[scale=1.2]
			% \draw[help lines] (-1,-1) grid (2,2);
			\coordinate (1) at (0,-0.02);
			\coordinate (2) at (.05,.4);
			\coordinate (3) at (.5,.2);
			\coordinate (4) at (.85,-.08);
			\coordinate (5) at (1.45,-.04);
			\coordinate (6) at (-0.7,.3);
			\coordinate (7) at (2.1,.3);
			\coordinate (8) at (2.05,1);
			\coordinate (9) at (0.2,1.1);
			\coordinate (10) at (.9,-.65);
			\coordinate (11) at (2.2,.6);
			\coordinate (12) at (-.3,1);
			\coordinate (13) at (-.8,.9);
			\coordinate (14) at (-1.1,.5);
			\foreach \x in {1,2,...,5,10}{
				\draw[DodgerBlue3,fill=DodgerBlue3,fill opacity=.35,very thick] (\x) circle[radius=.3];
				\draw[fill,very thick] (\x) circle[radius=.02];
			}
			\foreach \x in {6,9,12,13,14}{
				\draw[Firebrick2,fill=Firebrick2,fill opacity=.35,very thick] (\x) circle[radius=.3];
				\draw[fill,very thick] (\x) circle[radius=.02];
			}
			\foreach \x in {7,8,11}{
				\draw[SeaGreen3,fill=SeaGreen3,fill opacity=.35,very thick] (\x) circle[radius=.3];
				\draw[fill,very thick] (\x) circle[radius=.02];
			}
		\end{tikzpicture}
	}
	\caption{Komponenten einer 14-elementigen Punktmenge zu verschiedenen $\varepsilon$-Werten}\label{fig:components}
\end{figure}

\begin{definition}[{name=[Gruppe während eines Zeitraums]}]
	Eine Menge $G$ von $k$ Entitäten bildet eine \Index{Gruppe} im Zeitintervall $I$, falls folgendes gilt:
	\begin{enumerate}[(i)]
		\item $G$ enthält mindestens $m$ Entitäten, also $k \ge m$
		\item die Länge von $I$ ist mindestens $\delta$
		\item zu jeder Zeit $t \in I$ existiert eine Komponente $C \in \mathcal{C}(t)$ mit $G \subseteq C$.
	\end{enumerate}
	Das Intervall $I=[t_s,t_e]$ der Gruppe $G$ bezeichnen wir auch mit $I_G$.
	Eine Gruppe $H$ \bet{überlagert}\index{Gruppe!überlagernde} $G$, falls $G \subseteq H$ und $I_G \subseteq I_H$ gilt.
	Falls kein solches $H$ existiert, so heißt $G$ \bet{maximal}\index{Gruppe!maximale}. 
\end{definition}

Da wir ja eigentlich die Trajektorien einzelner Entitäten gruppieren wollen, mag es auf den ersten Blick etwas kontraintuitiv erscheinen, dass eine Entität $x$ in mehreren maximalen Gruppen enthalten sein kann, da zum Überlagern auch die Inklusion der Zeitintervalle gegeben sein muss.
